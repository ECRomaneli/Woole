(e=>{let t=function(){var n,e={},t=this&&this.__classPrivateFieldSet||function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&r:t.has(e))return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n;throw new TypeError("Cannot write private member to an object whose class did not declare it")},i=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&i:t.has(e))return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")};Object.defineProperty(e,"__esModule",{value:!0});let a=":",d="*",u="~";let l=")";let f='""',s=".";var c,r,o;let v=/^[^-\d]*(-?\d+(\.\d+)?)?[^-\d]*-[^-\d]*(-?\d+(\.\d+)?)?[^-\d]*$/,h=new RegExp(` *(not)? *(\\()| *(not +)?(?:((?:\\\\.|[^ (${l}\\\\${d}${u}${a}])+) *([${d}${u}]?${a}))? *("((?:\\\\.|[^"\\\\])+)"?|(?:\\\\.|[^ (${l}\\\\])+)? *(and|or|\\${l}|$)`,"g"),w={GROUP_NEGATED:1,GROUP_START:2,NEGATED:3,KEY:4,TYPE:5,VALUE:6,QUOTED_VALUE:7,OPERATOR:8},m=-1,p="",E="string",y="number",g="boolean",O="bigint",T="object";class R{constructor(){this.conditions=[],this.operator=void 0}lastCondition(){return this.conditions[this.conditions.length-1]}}(r=c=c||{}).AND="and",r.OR="or",(o=c=c||{}).from=function(e){return e!==o.OR?o.AND:o.OR};class A{constructor(e={}){n.set(this,void 0),t(this,n,e,"f")}search(e,t){return A.search(e,t,i(this,n,"f"))}static search(e,t,n={}){return e?t&&t.trim()!==p?(void 0===n.allowNumericString&&(n.allowNumericString=!0),void 0===n.allowKeyValueMatching&&(n.allowKeyValueMatching=!0),[...x(new Set(e),function t(n,i=new RegExp(h),r=new R){let o;for(;null!==(o=i.exec(n))&&o[0]!==p;)if(o[w.GROUP_START]){let e=t(n,i);e.negated=!!o[w.GROUP_NEGATED],r.conditions.push(e)}else{let t=o[w.KEY],n=o[w.QUOTED_VALUE]||void 0;if(void 0===t?t=void 0!==n?s:o[w.VALUE]:void 0===n&&(n=o[w.VALUE]!==f?o[w.VALUE]:void 0),t||n){let e=o[w.TYPE]&&o[w.TYPE]!==a?o[w.TYPE].charAt(0):void 0;r.conditions.push(b(!!o[w.NEGATED],e,t,n))}if(o[w.OPERATOR]===l)break;o[w.OPERATOR]&&(r.lastCondition().operator=c.from(o[w.OPERATOR]))}return r}(t.toLowerCase()),n)]):e.slice():[]}}function x(t,n,i){if(0===n.conditions.length)return n.negated?new Set:t;let r=P(t,n.conditions[0],i);for(let e=1;e<n.conditions.length;e++){var o,a=n.conditions[e],l=n.conditions[e-1].operator;if(l&&l===c.OR)for(o of P(t,a,i))r.add(o);else r=P(r,a,i)}if(!n.negated)return r;var e,d=new Set;for(e of t)r.has(e)||d.add(e);return d}function P(e,t,n){if("conditions"in t)return x(e,t,n);var i,r=new Set;for(i of e)t.negated!==function t(n,i,r,o,a){if(null==n||typeof n!==T)return!1;let e=Object.keys(n);r+=s;for(var l of e){let e=r+l.toLowerCase();if(!$(e,o.excludeKeys)){if(void 0===a){if(e.indexOf(i.key)===m){if(t(n[l],i,e,o))return!0;if(o.allowKeyValueMatching&&void 0===i.value&&U(i.key,n[l],i.type,o))return!0;continue}if(void 0===i.value)return!0}if(U(i.value,n[l],i.type,o)||t(n[l],i,e,o,!0))return!0}}return!1}(i,t,p,n)&&r.add(i);return r}function b(t,e,n,i){t={negated:t,key:_(n),type:e,value:_(i)};if(t.type)if(t.value&&t.value.trim()!==p)if(t.type===d)try{t.value=new RegExp(t.value,"i")}catch(e){delete t.type,delete t.value}else{n=t.value.match(v);(!n||(t.value={min:parseFloat(n[1]),max:parseFloat(n[3])},t.value.min||0===t.value.min||delete t.value.min,t.value.max||0===t.value.max||delete t.value.max,void 0===t.value.min&&void 0===t.value.max))&&(delete t.type,delete t.value)}else delete t.type,delete t.value;return t}function U(e,t,n,i){if(null!=t){var r,o,a=typeof t;if(a!==T)return n===u?!(a!==y&&a!==O&&(!i.allowNumericString||a!==E||isNaN(t=+t)))&&(o=t,void 0===(r=e).min||void 0===r.max?void 0===r.min?o<=r.max:o>=r.min:o>=r.min&&o<=r.max):n===d?e.test(t):a===E?(""+t).toLowerCase().indexOf(e)!==m:(a===y||a===O||a===g)&&(""+t).indexOf(e)!==m;if(i.matchChildKeysAsValues)for(var l of Object.keys(t))if(U(e,l,n,i))return!0}return!1}function $(e,t){if(t)for(var n of t)if(e.endsWith(n))return!0;return!1}function _(e){return e&&e.replace(/\\(.)/g,"$1")}return n=new WeakMap,e.default=A,e.default}();"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.SearchEngine=t})("undefined"!=typeof window?window:this);
//# sourceMappingURL=search-engine.min.js.map
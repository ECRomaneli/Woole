(e=>{let n=(()=>{let d=":",u="*",a="~",l=")",f='""',c=".";var s,e,n;let o=/^[-\D]*(-?\d+(\.\d+)?)?[-\D]*-[-\D]*(-?\d+(\.\d+)?)?[-\D]*$/,v=new RegExp(` *(not)? *(\\()| *(not +)?(?:((?:\\\\.|[^ (${l}\\\\${u}${a}${d}])+) *([${u}${a}]?${d}))? *("((?:\\\\.|[^"\\\\])+)"|(?:\\\\.|[^ (${l}\\\\])+)? *(and|or|\\${l}|$)`,"g"),E={GROUP_NEGATED:1,GROUP_START:2,NEGATED:3,KEY:4,TYPE:5,VALUE:6,QUOTED_VALUE:7,OPERATOR:8},p=-1,t=[],m="",O="string",R="number",h="boolean",A="bigint",i="object";class T{constructor(){this.conditions=[],this.operator=void 0}lastCondition(){return this.conditions[this.conditions.length-1]}}function g(n,e,t,i){n={negated:n,key:P(t),type:e,value:P(i)};if(n.type)if(n.value&&n.value.trim()!==m)if(n.type===u)try{n.value=new RegExp(n.value,"i")}catch(e){delete n.type,delete n.value}else{t=n.value.match(o);(!t||(n.value={min:parseFloat(t[1])||void 0,max:parseFloat(t[3])||void 0},void 0===n.value.min&&void 0===n.value.max))&&(delete n.type,delete n.value)}else delete n.type,delete n.value;return n}function r(n,t,i){if(0===t.conditions.length)return t.negated?new Set:n;let o=y(n,t.conditions[0],i);for(let e=1;e<t.conditions.length;e++){var r=t.conditions[e],d=t.conditions[e-1].operator;d&&d===s.OR?y(n,r,i).forEach(e=>o.add(e)):o=y(o,r,i)}if(!t.negated)return o;var e,u=new Set;for(e of n)o.has(e)||u.add(e);return u}function y(e,n,t){if("conditions"in n)return r(e,n,t);let i=new Set;return e.forEach(e=>{n.negated!==function n(t,i,o,r,d){let e=D(t);o+=c;for(var u of e){let e=o+u.toLowerCase();if(!x(e,r)){if(void 0===d){if(e.indexOf(i.key)===p){if(n(t[u],i,e,r))return!0;continue}if(void 0===i.value)return!0}if(w(i.value,t[u],i.type)||n(t[u],i,e,r,!0))return!0}}return!1}(e,n,m,t)&&i.add(e)}),i}function w(e,n,t){var i,o,r;return null!=n&&(i=typeof n,t===a?(i===R||i===A)&&(o=e,r=Number(n),void 0===o.min||void 0===o.max?void 0===o.min?r<=o.max:r>=o.min:r>=o.min&&r<=o.max):t===u?e.test(n):i===O?(""+n).toLowerCase().indexOf(e)!==p:(i===R||i===A||i===h)&&(""+n).indexOf(e)!==p)}function x(n,e){return!!e&&e.some(e=>n.endsWith(e))}function D(e){return typeof e===i&&null!==e?Object.keys(e):t}function P(e){return e&&e.replace(/\\(.)/g,"$1")}return(e=s=s||{}).AND="and",e.OR="or",(n=s=s||{}).from=function(e){return e!==n.OR?n.AND:n.OR},{search:function(e,n,t){return e?n&&n.trim()!==m?[...r(new Set(e),function n(t,i=new RegExp(v),o=new T){let r;for(;null!==(r=i.exec(t))&&r[0]!==m;)if(r[E.GROUP_START]){let e=n(t,i);e.negated=!!r[E.GROUP_NEGATED],o.conditions.push(e)}else{let n=r[E.KEY],t=r[E.QUOTED_VALUE]||void 0;if(void 0===n?n=void 0!==t?c:r[E.VALUE]:void 0===t&&(t=r[E.VALUE]!==f?r[E.VALUE]:void 0),n||t){let e=r[E.TYPE]&&r[E.TYPE]!==d?r[E.TYPE].charAt(0):void 0;o.conditions.push(g(!!r[E.NEGATED],e,n,t))}if(r[E.OPERATOR]===l)break;r[E.OPERATOR]&&(o.lastCondition().operator=s.from(r[E.OPERATOR]))}return o}(n.toLowerCase()),t)]:e.slice():[]}}})();"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.SearchEngine=n})("undefined"!=typeof window?window:this);
//# sourceMappingURL=search-engine.min.js.map
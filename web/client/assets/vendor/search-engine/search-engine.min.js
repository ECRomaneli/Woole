(e=>{let n=(()=>{let r=":",d="*",u="~",a=")",l='""',f=".";var s,e,n;let o=/^[-\D]*(-?\d+(\.\d+)?)?[-\D]*-[-\D]*(-?\d+(\.\d+)?)?[-\D]*$/,c=new RegExp(` *(\\()| *(not +)?(?:((?:\\\\.|[^ (${a}\\\\${d}${u}${r}])+) *([${d}${u}]?${r}))? *("((?:\\\\.|[^"\\\\])+)"|(?:\\\\.|[^ (${a}\\\\])+)? *(\\${a})? *(and|or|\\)|$)`,"g"),v={GROUP_START:1,NEGATED:2,KEY:3,TYPE:4,VALUE:5,QUOTED_VALUE:6,GROUP_END:7,OPERATOR:8},E=-1,t=[],O="",R="string",m="number",p="boolean",A="bigint";class T{constructor(){this.conditions=[],this.operator=void 0}lastCondition(){return this.conditions[this.conditions.length-1]}}function h(n,e,t,i){n={negated:n,key:D(t),type:e,value:D(i)};if(n.type)if(n.value&&n.value.trim()!==O)if(n.type===d)try{n.value=new RegExp(n.value,"i")}catch(e){delete n.type,delete n.value}else{t=n.value.match(o);(!t||(n.value={min:parseFloat(t[1])||void 0,max:parseFloat(t[3])||void 0},void 0===n.value.min&&void 0===n.value.max))&&(delete n.type,delete n.value)}else delete n.type,delete n.value;return n}function P(n,t,i){if(0===t.conditions.length)return new Set(n);let o=y(n,t.conditions[0],i);for(let e=1;e<t.conditions.length;e++){var r=t.conditions[e],d=t.conditions[e-1].operator;d&&d===s.OR?y(n,r,i).forEach(e=>o.add(e)):o=y([...o],r,i)}return o}function y(e,n,t){if("conditions"in n)return P(e,n,t);let i=new Set;return e.forEach(e=>{n.negated!==function t(i,o,r,d,u){return w(i).some(e=>{let n=r+f+e.toLowerCase();if(g(n,d))return!1;if(void 0===u){if(n.indexOf(o.key)===E)return t(i[e],o,n,d);if(void 0===o.value)return!0}return x(o.value,i[e],o.type)||t(i[e],o,n,d,!0)})}(e,n,O,t)&&i.add(e)}),i}function x(e,n,t){var i,o,r;return null!=n&&(i=typeof n,t===u?(i===m||i===A)&&(o=e,r=Number(n),void 0===o.min||void 0===o.max?void 0===o.min?r<=o.max:r>=o.min:r>=o.min&&r<=o.max):t===d?e.test(n):i===R?(""+n).toLowerCase().indexOf(e)!==E:(i===m||i===A||i===p)&&(""+n).indexOf(e)!==E)}function g(n,e){return!!e&&e.some(e=>n.endsWith(e))}function w(e){return e instanceof Object?Object.keys(e):t}function D(e){return e&&e.replace(/\\(.)/g,"$1")}return(e=s=s||{}).AND="and",e.OR="or",(n=s=s||{}).from=function(e){return e!==n.OR?n.AND:n.OR},{search:function(e,n,t){return e?n&&n.trim()!==O?[...P(e,function e(n,t=new RegExp(c),i=new T){let o;for(;null!==(o=t.exec(n))&&o[0]!==O;)if(o[v.GROUP_START])i.conditions.push(e(n,t));else{let n=o[v.KEY],t=o[v.QUOTED_VALUE]||void 0;if(void 0===n?n=void 0!==t?f:o[v.VALUE]:void 0===t&&(t=o[v.VALUE]!==l?o[v.VALUE]:void 0),n||t){let e=o[v.TYPE]&&o[v.TYPE]!==r?o[v.TYPE].charAt(0):void 0;i.conditions.push(h(!!o[v.NEGATED],e,n,t))}if(o[v.OPERATOR]===a&&(o[v.GROUP_END]=a,o[v.OPERATOR]=void 0),o[v.GROUP_END]){o[v.OPERATOR]&&(i.operator=s.from(o[v.OPERATOR]));break}o[v.OPERATOR]&&(i.lastCondition().operator=s.from(o[v.OPERATOR]))}return i}(n.toLowerCase()),t)]:e.slice():[]}}})();"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.SearchEngine=n})("undefined"!=typeof window?window:this);
//# sourceMappingURL=search-engine.min.js.map